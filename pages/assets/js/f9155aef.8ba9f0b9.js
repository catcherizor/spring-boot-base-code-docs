"use strict";(self.webpackChunkspring_boot_base_code_docs=self.webpackChunkspring_boot_base_code_docs||[]).push([[453],{1097:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var t=n(4848),r=n(8453);const a={sidebar_position:4,authors:[{name:"Yaman",title:"Specification"}]},s="Specification",c={id:"code-base/specification",title:"Specification",description:"Base Specification",source:"@site/docs/code-base/specification.md",sourceDirName:"code-base",slug:"/code-base/specification",permalink:"/spring-boot-base-code-docs/docs/code-base/specification",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/code-base/specification.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,authors:[{name:"Yaman",title:"Specification"}]},sidebar:"tutorialSidebar",previous:{title:"Repository",permalink:"/spring-boot-base-code-docs/docs/code-base/repository"},next:{title:"Service",permalink:"/spring-boot-base-code-docs/docs/code-base/service"}},o={},l=[{value:"Base Specification",id:"base-specification",level:2},{value:"Interface",id:"interface",level:3},{value:"Base Class",id:"base-class",level:3},{value:"Explanation",id:"explanation",level:4},{value:"Basic How To Use",id:"basic-how-to-use",level:2},{value:"Interface",id:"interface-1",level:3},{value:"Base Class",id:"base-class-1",level:3},{value:"Explanation",id:"explanation-1",level:3}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h1,{id:"specification",children:"Specification"}),"\n",(0,t.jsx)(i.h2,{id:"base-specification",children:"Base Specification"}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"BaseSpecification"})," class is designed to provide a base for handling common search operations in the repository. It implements the ",(0,t.jsx)(i.code,{children:"IBaseSpecification"})," interface, making it a robust and reusable component for querying data. By defining common specification methods such as ",(0,t.jsx)(i.code,{children:"where"}),", ",(0,t.jsx)(i.code,{children:"whereLike"}),", ",(0,t.jsx)(i.code,{children:"whereNot"}),", and ",(0,t.jsx)(i.code,{children:"whereIn"}),", the BaseSpecification class simplifies search operations and promotes code reuse."]}),"\n",(0,t.jsxs)(i.p,{children:["The goal of the ",(0,t.jsx)(i.code,{children:"BaseSpecification"})," class is to increase reusability and maintain clean, organized code, ensuring that developers do not need to create functions for simple search logic repeatedly. It provides a standard way to handle query specifications, especially in scenarios involving complex search criteria, by encapsulating common operations within a single specification class. This approach fosters a more organized and efficient codebase."]}),"\n",(0,t.jsx)(i.h3,{id:"interface",children:"Interface"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"public interface IBaseSpecification<T> {\r\n    Path<String> toExpression(Root<T> root, String field);\r\n    Specification<T> where(String field, Object value);\r\n    Specification<T> whereLike(String field, String value);\r\n    Specification<T> whereNot(String field, Object value);\r\n    Specification<T> whereIn(String field, Object[] values);\r\n    Specification<T> notDeleted();\r\n}\n"})}),"\n",(0,t.jsx)(i.h3,{id:"base-class",children:"Base Class"}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"BaseSpecification"})," class provides a standardized way to construct dynamic query specifications for entities in a repository. It implements the ",(0,t.jsx)(i.code,{children:"IBaseSpecification"})," interface and includes methods for common query operations such as equality, like, negation, and inclusion checks. This class simplifies the process of building criteria queries, promoting reusability and maintainability in your data access layer."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:'@Component\r\npublic class BaseSpecification<T> implements IBaseSpecification<T> {\r\n\r\n    @Override\r\n    public Specification<T> where(String field, Object value) {\r\n        return (root, query, criteriaBuilder) -> {\r\n            return criteriaBuilder.equal(toExpression(root, field), value);\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public Specification<T> whereLike(String field, String value) {\r\n        return (root, query, criteriaBuilder) -> {\r\n            \r\n            return criteriaBuilder.like(criteriaBuilder.lower(toExpression(root, field)),\r\n            "%" + value.toLowerCase() + "%");\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public Specification<T> notDeleted() {\r\n        return (root, query, criteriaBuilder) -> {\r\n            return criteriaBuilder.equal(root.get("isDeleted"), false);\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public Specification<T> whereNot(String field, Object value) {\r\n        return (root, query, criteriaBuilder) -> {\r\n            return criteriaBuilder.notEqual(toExpression(root, field), value);\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public Specification<T> whereIn(String field, Object[] values) {\r\n        return (root, query, criteriaBuilder) ->{\r\n            return toExpression(root, field).in(values);\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public Path<String> toExpression(Root<T> root, String field) {\r\n        String[] fields = field.split("\\\\.");\r\n        Path<String> path = root.get(fields[0]);\r\n        for (int i = 1; i < fields.length; i++) {\r\n            \r\n            path = path.get(fields[i]);\r\n        }\r\n\r\n        return path;\r\n        \r\n    }\r\n}\r\n\n'})}),"\n",(0,t.jsx)(i.h4,{id:"explanation",children:"Explanation"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.code,{children:"where"})}),": Constructs a specification for equality check."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.code,{children:"whereLike"})}),": Constructs a specification for a case-insensitive partial match."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.code,{children:"notDeleted"})}),": Constructs a specification to filter out soft-deleted records."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.code,{children:"whereNot"})}),": Constructs a specification for inequality check."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.code,{children:"whereIn"})}),": Constructs a specification to check if a field value is within a set of values."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.code,{children:"toExpression"})}),": Converts a dot-notated field name into a ",(0,t.jsx)(i.code,{children:"Path"})," expression for nested fields."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"BaseSpecification"})," class allows for flexible and dynamic querying, making it easier to handle complex search criteria within your application. This promotes a clean and maintainable codebase, reducing the need for repetitive query logic."]}),"\n",(0,t.jsx)(i.h2,{id:"basic-how-to-use",children:"Basic How To Use"}),"\n",(0,t.jsx)(i.h3,{id:"interface-1",children:"Interface"}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"IBankRepository"})," interface extends the ",(0,t.jsx)(i.code,{children:"IBaseRepository"})," interface, adding specific methods for the ",(0,t.jsx)(i.code,{children:"Bank"})," entity. This allows for custom query methods such as finding a bank by its code or saving multiple bank entities at once."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"public interface ICitySpecifications extends IBaseSpecification<City> {\r\n    \r\n}\n"})}),"\n",(0,t.jsx)(i.h3,{id:"base-class-1",children:"Base Class"}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"CitySpecifications"})," class extends the ",(0,t.jsx)(i.code,{children:"BaseSpecification"})," class and implements the ",(0,t.jsx)(i.code,{children:"ICitySpecifications"})," interface. This setup leverages the common functionalities provided by ",(0,t.jsx)(i.code,{children:"BaseSpecification"})," while also allowing for specific implementations related to the ",(0,t.jsx)(i.code,{children:"Bank"})," entity."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:'// Sample component of Base Class Specification to use it in repository\r\n@Component\r\npublic class CitySpecifications extends BaseSpecification<City> implements ICitySpecifications {\r\n    \r\n}\r\n\r\n// Uses Case in City Repository For search data\r\n@Repository\r\npublic class CityRepository extends BaseRepository<City> implements ICityRepository {\r\n\r\n    private final ICitySpecifications citySpecifications;\r\n\r\n    public CityRepository(EntityManager entityManager, ICitySpecifications citySpecifications) {\r\n        super(City.class, entityManager);\r\n        this.citySpecifications = citySpecifications; \r\n    }\r\n\r\n    @Override\r\n    public PaginateData<City> list(PageRequest pageRequest, Province province) {\r\n        Specification<City> spec = Specification.where(null);\r\n        spec = spec.and(citySpecifications.notDeleted())\r\n                .and(citySpecifications.where("province", province))\r\n                .and(\r\n                    spec.or(citySpecifications.whereLike("name", pageRequest.getSearch()))\r\n                    .or(citySpecifications.whereLike("postalCodes", pageRequest.getSearch()))\r\n                    .or(citySpecifications.whereLike("province.name", pageRequest.getSearch()))\r\n                );\r\n        Sort sort = Sort.by(pageRequest.getSortBy());\r\n\r\n        if(pageRequest.getSortDirection().equals("asc")) {\r\n            sort = sort.ascending();\r\n        } else {\r\n            sort = sort.descending();\r\n        }\r\n                \r\n        Page<City> data = findAll(spec, org.springframework.data.domain.PageRequest.of(\r\n            pageRequest.getPageNumber().intValue(), pageRequest.getPageSize().intValue(), sort\r\n        ));\r\n        \r\n        List<City> result = data.getContent();\r\n        \r\n        PaginateData<City> resultData = new PaginateData<>();\r\n        resultData.setItems(result);\r\n\r\n        Long totalElements = data.getTotalElements();\r\n\r\n        resultData.setPageData(new PageData(\r\n            pageRequest.getPageSize(), \r\n            PaginateUtils.getTotalPages(pageRequest.getPageSize(), totalElements), \r\n            totalElements\r\n        ));\r\n\r\n        return resultData;\r\n    }\r\n    \r\n}\r\n\n'})}),"\n",(0,t.jsxs)(i.p,{children:["here the more explaination of sample Using the ",(0,t.jsx)(i.code,{children:"whereLike"})," function class is straightforward. For example:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-java",children:'loanSpecifications.whereLike("code", pageRequest.getSearch());\n'})}),"\n",(0,t.jsx)(i.p,{children:"If you need to query a field within a related entity, simply append the field with a dot notation:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-java",children:'loanSpecifications.whereLike("province.name", pageRequest.getSearch());\n'})}),"\n",(0,t.jsx)(i.p,{children:"This method allows for flexible and dynamic querying, making it easier to handle complex search criteria within your application."}),"\n",(0,t.jsx)(i.h3,{id:"explanation-1",children:"Explanation"}),"\n",(0,t.jsx)(i.p,{children:"In the example above, we demonstrate how to use the BaseSpecification class for basic search operations within repository functions. The BaseSpecification class provides a standard way to handle various query specifications, such as equality checks, like queries, negations, and collections."}),"\n",(0,t.jsx)(i.p,{children:"By implementing BaseSpecification, you ensure a clean, reusable, and maintainable approach to querying data within your application. This setup promotes code reuse and simplifies the management of entity-specific query logic, enabling flexible and dynamic search capabilities."})]})}function p(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>c});var t=n(6540);const r={},a=t.createContext(r);function s(e){const i=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:i},e.children)}}}]);